--- a/mozilla-release/netwerk/sctp/src/netinet/sctp_os_userspace.h
+++ b/mozilla-release/netwerk/sctp/src/netinet/sctp_os_userspace.h
@@ -400,9 +400,11 @@
 #define if_nametoindex(x) win_if_nametoindex(x)
 
 #else /* !defined(Userspace_os_Windows) */
+#ifdef __FreeBSD__
 #include <sys/cdefs.h> /* needed? added from old __FreeBSD__ */
+#endif /* __FreeBSD__ */
 #include <sys/socket.h>
-#if defined(__Userspace_os_DragonFly) || defined(__Userspace_os_FreeBSD) || defined(__Userspace_os_Linux) || defined(__Userspace_os_NetBSD) || defined(__Userspace_os_OpenBSD) || defined(ANDROID)
+#if !defined(__Userspace_os_Windows) && !defined(__Userspace_os_Darwin)
 #include <pthread.h>
 #endif
 typedef pthread_mutex_t userland_mutex_t;
@@ -427,7 +427,7 @@
 /* #include <sys/param.h>  in FreeBSD defines MSIZE */
 /* #include <sys/ktr.h> */
 /* #include <sys/systm.h> */
-#if defined(__Userspace_os_Windows)
+#if 1
 #include <user_queue.h>
 #else
 #include <sys/queue.h>
--- a/mozilla-release/netwerk/sctp/src/netinet/sctp_pcb.c
+++ b/mozilla-release/netwerk/sctp/src/netinet/sctp_pcb.c
@@ -30,6 +30,9 @@
  * THE POSSIBILITY OF SUCH DAMAGE.
  */
 
+#define _BSD_SOURCE /* for IPPORT_RESERVED */
+#include <netdb.h>
+
 #ifdef __FreeBSD__
 #include <sys/cdefs.h>
 __FBSDID("$FreeBSD: head/sys/netinet/sctp_pcb.c 258765 2013-11-30 12:51:19Z tuexen $");
--- a/mozilla-release/netwerk/sctp/src/user_queue.h
+++ b/mozilla-release/netwerk/sctp/src/user_queue.h
@@ -31,7 +31,7 @@
 #ifndef _USER_QUEUE_H_
 #define	_USER_QUEUE_H_
 
-#if !defined (__Userspace_os_Windows)
+#if defined(__Userspace_os_FreeBSD)
 #include <sys/cdefs.h>
 #endif
 /*
